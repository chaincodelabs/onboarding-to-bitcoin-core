<svg aria-roledescription='flowchart-v2' id='mermaid-1680301733161' preserveAspectRatio='xMidYMid meet' role='graphics-document document' style='max-width: 1133.67px; background-color: white;' viewBox='-8 -8 1133.671875 511.5' width='100%' xmlns:xlink='http://www.w3.org/1999/xlink' xmlns='http://www.w3.org/2000/svg'><style>#mermaid-1680301733161{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;fill:#333;}#mermaid-1680301733161 .error-icon{fill:#552222;}#mermaid-1680301733161 .error-text{fill:#552222;stroke:#552222;}#mermaid-1680301733161 .edge-thickness-normal{stroke-width:2px;}#mermaid-1680301733161 .edge-thickness-thick{stroke-width:3.5px;}#mermaid-1680301733161 .edge-pattern-solid{stroke-dasharray:0;}#mermaid-1680301733161 .edge-pattern-dashed{stroke-dasharray:3;}#mermaid-1680301733161 .edge-pattern-dotted{stroke-dasharray:2;}#mermaid-1680301733161 .marker{fill:#333333;stroke:#333333;}#mermaid-1680301733161 .marker.cross{stroke:#333333;}#mermaid-1680301733161 svg{font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:16px;}#mermaid-1680301733161 .label{font-family:"trebuchet ms",verdana,arial,sans-serif;color:#333;}#mermaid-1680301733161 .cluster-label text{fill:#333;}#mermaid-1680301733161 .cluster-label span{color:#333;}#mermaid-1680301733161 .label text,#mermaid-1680301733161 span{fill:#333;color:#333;}#mermaid-1680301733161 .node rect,#mermaid-1680301733161 .node circle,#mermaid-1680301733161 .node ellipse,#mermaid-1680301733161 .node polygon,#mermaid-1680301733161 .node path{fill:#ECECFF;stroke:#9370DB;stroke-width:1px;}#mermaid-1680301733161 .node .label{text-align:center;}#mermaid-1680301733161 .node.clickable{cursor:pointer;}#mermaid-1680301733161 .arrowheadPath{fill:#333333;}#mermaid-1680301733161 .edgePath .path{stroke:#333333;stroke-width:2.0px;}#mermaid-1680301733161 .flowchart-link{stroke:#333333;fill:none;}#mermaid-1680301733161 .edgeLabel{background-color:#e8e8e8;text-align:center;}#mermaid-1680301733161 .edgeLabel rect{opacity:0.5;background-color:#e8e8e8;fill:#e8e8e8;}#mermaid-1680301733161 .cluster rect{fill:#ffffde;stroke:#aaaa33;stroke-width:1px;}#mermaid-1680301733161 .cluster text{fill:#333;}#mermaid-1680301733161 .cluster span{color:#333;}#mermaid-1680301733161 div.mermaidTooltip{position:absolute;text-align:center;max-width:200px;padding:2px;font-family:"trebuchet ms",verdana,arial,sans-serif;font-size:12px;background:hsl(80, 100%, 96.2745098039%);border:1px solid #aaaa33;border-radius:2px;pointer-events:none;z-index:100;}#mermaid-1680301733161 .flowchartTitleText{text-anchor:middle;font-size:18px;fill:#333;}#mermaid-1680301733161 .label foreignObject{font-size:85%;overflow:visible;}#mermaid-1680301733161 :root{--mermaid-font-family:"trebuchet ms",verdana,arial,sans-serif;}</style><g><marker class='marker flowchart' id='flowchart-pointEnd' markerHeight='12' markerUnits='userSpaceOnUse' markerWidth='12' orient='auto' refX='10' refY='5' viewBox='0 0 12 20'><path class='arrowMarkerPath' d='M 0 0 L 10 5 L 0 10 z' style='stroke-width: 1; stroke-dasharray: 1, 0;'/></marker><marker class='marker flowchart' id='flowchart-pointStart' markerHeight='12' markerUnits='userSpaceOnUse' markerWidth='12' orient='auto' refX='0' refY='5' viewBox='0 0 10 10'><path class='arrowMarkerPath' d='M 0 5 L 10 10 L 10 0 z' style='stroke-width: 1; stroke-dasharray: 1, 0;'/></marker><marker class='marker flowchart' id='flowchart-circleEnd' markerHeight='11' markerUnits='userSpaceOnUse' markerWidth='11' orient='auto' refX='11' refY='5' viewBox='0 0 10 10'><circle class='arrowMarkerPath' cx='5' cy='5' r='5' style='stroke-width: 1; stroke-dasharray: 1, 0;'/></marker><marker class='marker flowchart' id='flowchart-circleStart' markerHeight='11' markerUnits='userSpaceOnUse' markerWidth='11' orient='auto' refX='-1' refY='5' viewBox='0 0 10 10'><circle class='arrowMarkerPath' cx='5' cy='5' r='5' style='stroke-width: 1; stroke-dasharray: 1, 0;'/></marker><marker class='marker cross flowchart' id='flowchart-crossEnd' markerHeight='11' markerUnits='userSpaceOnUse' markerWidth='11' orient='auto' refX='12' refY='5.2' viewBox='0 0 11 11'><path class='arrowMarkerPath' d='M 1,1 l 9,9 M 10,1 l -9,9' style='stroke-width: 2; stroke-dasharray: 1, 0;'/></marker><marker class='marker cross flowchart' id='flowchart-crossStart' markerHeight='11' markerUnits='userSpaceOnUse' markerWidth='11' orient='auto' refX='-1' refY='5.2' viewBox='0 0 11 11'><path class='arrowMarkerPath' d='M 1,1 l 9,9 M 10,1 l -9,9' style='stroke-width: 2; stroke-dasharray: 1, 0;'/></marker><g class='root'><g class='clusters'><g class='cluster default' id='txmempool.cpp'><rect height='425' rx='0' ry='0' style='' width='177.390625' x='274.0625' y='0'/><g class='cluster-label' transform='translate(309.7265625, 0)'><foreignObject height='19' width='106.0625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>txmempool.cpp</span></div></foreignObject></g></g><g class='cluster default' id='validation.cpp'><rect height='101' rx='0' ry='0' style='' width='224.0625' x='0' y='394.5'/><g class='cluster-label' transform='translate(63.8359375, 394.5)'><foreignObject height='19' width='96.390625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>validation.cpp</span></div></foreignObject></g></g></g><g class='edgePaths'><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-remove_recursive LE-remove_staged' d='M426.453125,50.5L430.6197916666667,50.5C434.7864583333333,50.5,443.1197916666667,50.5,451.453125,50.5C459.7864583333333,50.5,468.1197916666667,50.5,485.04651491769545,81.66666666666667C501.97323816872427,112.83333333333333,527.4933513374485,175.16666666666666,540.2534079218107,206.33333333333334L553.0134645061728,237.5' id='L-remove_recursive-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-remove_reorg LE-remove_staged' d='M424.8359375,131.5L429.2721354166667,131.5C433.7083333333333,131.5,442.5807291666667,131.5,451.18359375,131.5C459.7864583333333,131.5,468.1197916666667,131.5,484.3414137517147,149.16666666666666C500.5630358367627,166.83333333333334,524.6729466735254,202.16666666666666,536.7279020919067,219.83333333333334L548.7828575102881,237.5' id='L-remove_reorg-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-remove_block LE-remove_staged' d='M423.296875,212.5L427.9895833333333,212.5C432.6822916666667,212.5,442.0677083333333,212.5,450.9270833333333,212.5C459.7864583333333,212.5,468.1197916666667,212.5,480.8159079218107,216.66666666666666C493.51202417695475,220.83333333333334,510.57092335390945,229.16666666666666,519.1003729423868,233.33333333333334L527.6298225308642,237.5' id='L-remove_block-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-expire LE-remove_staged' d='M393.515625,293.5L403.171875,293.5C412.828125,293.5,432.140625,293.5,445.9635416666667,293.5C459.7864583333333,293.5,468.1197916666667,293.5,480.8159079218107,289.3333333333333C493.51202417695475,285.1666666666667,510.57092335390945,276.8333333333333,519.1003729423868,272.6666666666667L527.6298225308642,268.5' id='L-expire-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-trim_to_size LE-remove_staged' d='M409.265625,374.5L416.296875,374.5C423.328125,374.5,437.390625,374.5,448.5885416666667,374.5C459.7864583333333,374.5,468.1197916666667,374.5,484.3414137517147,356.8333333333333C500.5630358367627,339.1666666666667,524.6729466735254,303.8333333333333,536.7279020919067,286.1666666666667L548.7828575102881,268.5' id='L-trim_to_size-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-finalize LE-remove_staged' d='M199.0625,445L203.22916666666666,445C207.39583333333334,445,215.72916666666666,445,224.0625,445C232.39583333333334,445,240.72916666666666,445,249.0625,445C257.3958333333333,445,265.7291666666667,445,284.6783854166667,445C303.6276041666667,445,333.1927083333333,445,362.7578125,445C392.3229166666667,445,421.8880208333333,445,440.8372395833333,445C459.7864583333333,445,468.1197916666667,445,484.9886745876736,415.5833333333333C501.8575575086805,386.1666666666667,527.2619900173611,327.3333333333333,539.9642062717013,297.9166666666667L552.6664225260416,268.5' id='L-finalize-remove_staged-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-remove_staged LE-update_for_remove' d='M617.265625,253L621.4322916666666,253C625.5989583333334,253,633.9322916666666,253,642.265625,253C650.5989583333334,253,658.9322916666666,253,663.0989583333334,253L667.265625,253' id='L-remove_staged-update_for_remove-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-update_for_remove LE-remove_unchecked' d='M932.359375,253L936.5260416666666,253C940.6927083333334,253,949.0260416666666,253,957.359375,253C965.6927083333334,253,974.0260416666666,253,978.1927083333334,253L982.359375,253' id='L-update_for_remove-remove_unchecked-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/></g><g class='edgeLabels'><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g></g><g class='nodes'><g class='root' transform='translate(659.765625, 123.5)'><g class='clusters'><g class='cluster default' id='update_for_remove'><rect height='243' rx='0' ry='0' style='' width='265.09375' x='8' y='8'/><g class='cluster-label' transform='translate(18.53125, 8)'><foreignObject height='19' width='244.03125'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>UpdateForRemoveFromMempool()</span></div></foreignObject></g></g></g><g class='edgePaths'><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-calculate_ancestors LE-update_ancestors' d='M140.546875,64L140.546875,68.16666666666667C140.546875,72.33333333333333,140.546875,80.66666666666667,140.546875,89C140.546875,97.33333333333333,140.546875,105.66666666666667,140.546875,109.83333333333333L140.546875,114' id='L-calculate_ancestors-update_ancestors-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/><path class='edge-thickness-normal edge-pattern-solid flowchart-link LS-update_ancestors LE-update_children' d='M140.546875,145L140.546875,149.16666666666666C140.546875,153.33333333333334,140.546875,161.66666666666666,140.546875,170C140.546875,178.33333333333334,140.546875,186.66666666666666,140.546875,190.83333333333334L140.546875,195' id='L-update_ancestors-update_children-0' marker-end='url(#flowchart-pointEnd)' style='fill:none;'/></g><g class='edgeLabels'><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g><g class='edgeLabel'><g class='label' transform='translate(0, 0)'><foreignObject height='0' width='0'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='edgeLabel'/></div></foreignObject></g></g></g><g class='nodes'><g class='node default default' id='flowchart-update_children-81' transform='translate(140.546875, 210.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='189.109375' x='-94.5546875' y='-15.5'/><g class='label' style='' transform='translate(-87.0546875, -8)'><foreignObject height='16' width='174.109375'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>UpdateChildrenForRemoval()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-calculate_ancestors-79' transform='translate(140.546875, 48.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='195.09375' x='-97.546875' y='-15.5'/><g class='label' style='' transform='translate(-90.046875, -8)'><foreignObject height='16' width='180.09375'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>CalculateMemPoolAncestors()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-update_ancestors-80' transform='translate(140.546875, 129.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='141.40625' x='-70.703125' y='-15.5'/><g class='label' style='' transform='translate(-63.203125, -8)'><foreignObject height='16' width='126.40625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>UpdateAncestorsOf()</span></div></foreignObject></g></g></g></g><g class='node default default' id='flowchart-remove_recursive-73' transform='translate(362.7578125, 50.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='127.390625' x='-63.6953125' y='-15.5'/><g class='label' style='' transform='translate(-56.1953125, -8)'><foreignObject height='16' width='112.390625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>removeRecursive()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-remove_reorg-74' transform='translate(362.7578125, 131.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='124.15625' x='-62.078125' y='-15.5'/><g class='label' style='' transform='translate(-54.578125, -8)'><foreignObject height='16' width='109.15625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>removeForReorg()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-remove_block-75' transform='translate(362.7578125, 212.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='121.078125' x='-60.5390625' y='-15.5'/><g class='label' style='' transform='translate(-53.0390625, -8)'><foreignObject height='16' width='106.078125'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>removeForBlock()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-expire-76' transform='translate(362.7578125, 293.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='61.515625' x='-30.7578125' y='-15.5'/><g class='label' style='' transform='translate(-23.2578125, -8)'><foreignObject height='16' width='46.515625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>Expire()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-trim_to_size-77' transform='translate(362.7578125, 374.5)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='93.015625' x='-46.5078125' y='-15.5'/><g class='label' style='' transform='translate(-39.0078125, -8)'><foreignObject height='16' width='78.015625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>TrimToSize()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-finalize-78' transform='translate(112.03125, 445)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='174.0625' x='-87.03125' y='-15.5'/><g class='label' style='' transform='translate(-79.53125, -8)'><foreignObject height='16' width='159.0625'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>MemPoolAccept::Finalize()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-remove_staged-72' transform='translate(559.359375, 253)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='115.8125' x='-57.90625' y='-15.5'/><g class='label' style='' transform='translate(-50.40625, -8)'><foreignObject height='16' width='100.8125'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>RemoveStaged()</span></div></foreignObject></g></g><g class='node default default' id='flowchart-remove_unchecked-82' transform='translate(1050.015625, 253)'><rect class='basic label-container' height='31' rx='0' ry='0' style='' width='135.3125' x='-67.65625' y='-15.5'/><g class='label' style='' transform='translate(-60.15625, -8)'><foreignObject height='16' width='120.3125'><div style='display: inline-block; white-space: nowrap;' xmlns='http://www.w3.org/1999/xhtml'><span class='nodeLabel'>removeUnchecked()</span></div></foreignObject></g></g></g></g></g></svg>